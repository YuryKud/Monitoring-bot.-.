# Bot Monitoring Server

Ð¡ÐµÑ€Ð²ÐµÑ€ Ð´Ð»Ñ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ð° Ð¸ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð³Ð¾ Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐºÐ° Ñ‚Ð¾Ñ€Ð³Ð¾Ð²Ñ‹Ñ… Ð±Ð¾Ñ‚Ð¾Ð², Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÑŽÑ‰Ð¸Ñ… Ð½Ð° ÑƒÐ´Ð°Ð»ÐµÐ½Ð½Ñ‹Ñ… ÑÐµÑ€Ð²ÐµÑ€Ð°Ñ….

## ðŸš¨ ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ

Ð­Ñ‚Ð¾Ñ‚ ÑÐµÑ€Ð²Ð¸Ñ Ñ€ÐµÑˆÐ°ÐµÑ‚ ÐºÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð²Ð°Ð¶Ð½ÑƒÑŽ Ð·Ð°Ð´Ð°Ñ‡Ñƒ: Ð¾Ð½ Ð¿Ð¾ÑÑ‚Ð¾ÑÐ½Ð½Ð¾ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚, Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÑŽÑ‚ Ð»Ð¸ Ð²Ð°ÑˆÐ¸ Ñ‚Ð¾Ñ€Ð³Ð¾Ð²Ñ‹Ðµ Ð±Ð¾Ñ‚Ñ‹ (Buy Bot Ð¸ Sell Bot), Ð¸ ÐµÑÐ»Ð¸ Ð¾Ð½Ð¸ Ð¿ÐµÑ€ÐµÑÑ‚Ð°ÑŽÑ‚ Ð¾Ñ‚Ð²ÐµÑ‡Ð°Ñ‚ÑŒ â€” Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¸Ñ… Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚. Ð­Ñ‚Ð¾ Ð¿Ñ€ÐµÐ´Ð¾Ñ‚Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ð¸ Ñ‚Ð¾Ñ€Ð³Ð¾Ð²Ð¾Ð¹ Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚Ð¸, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð¼Ð¾Ð³ÑƒÑ‚ Ð¿Ñ€Ð¸Ð²ÐµÑÑ‚Ð¸ Ðº Ñ„Ð¸Ð½Ð°Ð½ÑÐ¾Ð²Ñ‹Ð¼ Ð¿Ð¾Ñ‚ÐµÑ€ÑÐ¼.

## ðŸ› ï¸ ÐŸÑ€Ð¸Ð½Ñ†Ð¸Ð¿ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹

Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° ÑÐ¾ÑÑ‚Ð¾Ð¸Ñ‚ Ð¸Ð· Ð´Ð²ÑƒÑ… Ð¾ÑÐ½Ð¾Ð²Ð½Ñ‹Ñ… ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ð¾Ð²:

1.  **Flask REST API Ð¡ÐµÑ€Ð²ÐµÑ€**: ÐŸÑ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð»ÑÐµÑ‚ HTTP endpoint Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾ ÑÑ‚Ð°Ñ‚ÑƒÑÐ° Ð±Ð¾Ñ‚Ð¾Ð².
2.  **SSH ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€**: Ð¤Ð¾Ð½Ð¾Ð²Ð°Ñ Ð·Ð°Ð´Ð°Ñ‡Ð°, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð¿ÐµÑ€Ð¸Ð¾Ð´Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ "Ð¶Ð¸Ð²Ñ‹" Ð»Ð¸ Ð±Ð¾Ñ‚Ñ‹, Ð¸ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ Ð¸Ñ… ÑÐµÑ€Ð²Ð¸ÑÐ°Ð¼Ð¸.

### Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¼ÐµÑ…Ð°Ð½Ð¸Ð·Ð¼ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ð° ("Ping-Ñ„Ð°Ð¹Ð»Ñ‹")

Ð­Ñ‚Ð¾ ÑÐ´Ñ€Ð¾ Ð²ÑÐµÐ¹ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹. Ð”Ð»Ñ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ð° Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ð¹, Ð½Ð¾ Ð½Ð°Ð´ÐµÐ¶Ð½Ñ‹Ð¹ Ð¼ÐµÑ…Ð°Ð½Ð¸Ð·Ð¼ Ð½Ð° Ð¾ÑÐ½Ð¾Ð²Ðµ "ping-Ñ„Ð°Ð¹Ð»Ð¾Ð²":

1.  **ÐšÐ°Ð¶Ð´Ñ‹Ð¹ Ñ‚Ð¾Ñ€Ð³Ð¾Ð²Ñ‹Ð¹ Ð±Ð¾Ñ‚** (Buy Bot, Sell Bot) Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð¿ÐµÑ€Ð¸Ð¾Ð´Ð¸Ñ‡ÐµÑÐºÐ¸ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, ÐºÐ°Ð¶Ð´Ñ‹Ðµ 30 ÑÐµÐºÑƒÐ½Ð´) Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÑ‚ÑŒ ÑÐ¿ÐµÑ†Ð¸Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ñ„Ð°Ð¹Ð» Ð½Ð° Ð´Ð¸ÑÐºÐµ ÑÐ²Ð¾ÐµÐ³Ð¾ ÑÐµÑ€Ð²ÐµÑ€Ð°. ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð·Ð°ÐºÐ»ÑŽÑ‡Ð°ÐµÑ‚ÑÑ Ð² Ð·Ð°Ð¿Ð¸ÑÐ¸ Ð² Ñ„Ð°Ð¹Ð» Ñ‚ÐµÐºÑƒÑ‰ÐµÐ¹ Unix-Ð¼ÐµÑ‚ÐºÐ¸ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ (`time.time()`).
2.  **ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ð¾Ð²Ñ‹Ð¹ ÑÐµÑ€Ð²ÐµÑ€** Ð¿Ð¾ SSH Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡Ð°ÐµÑ‚ÑÑ Ðº ÑƒÐ´Ð°Ð»ÐµÐ½Ð½Ð¾Ð¼Ñƒ ÑÐµÑ€Ð²ÐµÑ€Ñƒ, Ñ‡Ð¸Ñ‚Ð°ÐµÑ‚ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ ÑÑ‚Ð¸Ñ… ping-Ñ„Ð°Ð¹Ð»Ð¾Ð² Ð¸ ÑÑ€Ð°Ð²Ð½Ð¸Ð²Ð°ÐµÑ‚ Ð·Ð°Ð¿Ð¸ÑÐ°Ð½Ð½Ð¾Ðµ Ñ‚Ð°Ð¼ Ð²Ñ€ÐµÐ¼Ñ Ñ Ñ‚ÐµÐºÑƒÑ‰Ð¸Ð¼.
3.  **Ð›Ð¾Ð³Ð¸ÐºÐ° Ð¿Ñ€Ð¸Ð½ÑÑ‚Ð¸Ñ Ñ€ÐµÑˆÐµÐ½Ð¸Ñ**:
    *   **`Running`**: Ð•ÑÐ»Ð¸ Ñ€Ð°Ð·Ð½Ð¸Ñ†Ð° Ð¼ÐµÐ¶Ð´Ñƒ Ñ‚ÐµÐºÑƒÑ‰Ð¸Ð¼ Ð²Ñ€ÐµÐ¼ÐµÐ½ÐµÐ¼ Ð¸ Ð²Ñ€ÐµÐ¼ÐµÐ½ÐµÐ¼ Ð¸Ð· Ñ„Ð°Ð¹Ð»Ð° Ð¼ÐµÐ½ÑŒÑˆÐµ `PING_TIMEOUT` (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, 120 ÑÐµÐºÑƒÐ½Ð´), Ð±Ð¾Ñ‚ ÑÑ‡Ð¸Ñ‚Ð°ÐµÑ‚ÑÑ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÑŽÑ‰Ð¸Ð¼.
    *   **`Not Running`**: Ð•ÑÐ»Ð¸ Ñ€Ð°Ð·Ð½Ð¸Ñ†Ð° Ð±Ð¾Ð»ÑŒÑˆÐµ `PING_TIMEOUT`, Ð±Ð¾Ñ‚ ÑÑ‡Ð¸Ñ‚Ð°ÐµÑ‚ÑÑ "Ð·Ð°Ð²Ð¸ÑÑˆÐ¸Ð¼" Ð¸Ð»Ð¸ Ð¾ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ð²ÑˆÐ¸Ð¼ÑÑ. Ð¡ÐµÑ€Ð²Ð¸Ñ ÑÑ‚Ð¾Ð³Ð¾ Ð±Ð¾Ñ‚Ð° Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ÑÑ (`systemctl restart ...`).
    *   **`File Not Found`**: Ð•ÑÐ»Ð¸ ping-Ñ„Ð°Ð¹Ð» Ð½Ðµ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÐµÑ‚ Ð¸Ð»Ð¸ Ð¿ÑƒÑÑ‚, ÑÐ¸ÑÑ‚ÐµÐ¼Ð° Ð¿Ð¾Ð¿Ñ‹Ñ‚Ð°ÐµÑ‚ÑÑ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ ÑÐµÑ€Ð²Ð¸Ñ Ð±Ð¾Ñ‚Ð° (`systemctl start ...`), Ð¿Ñ€ÐµÐ´Ð¿Ð¾Ð»Ð°Ð³Ð°Ñ, Ñ‡Ñ‚Ð¾ Ð¾Ð½ Ð±Ñ‹Ð» Ð¾ÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½.

### ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð°

```plaintext
+-------------------+        SSH (Ð§Ñ‚ÐµÐ½Ð¸Ðµ Ñ„Ð°Ð¹Ð»Ð¾Ð²)        +-----------------------+
| Monitoring Server | ----------------------------------> | Remote Server         |
| (Flask API)       |                                   | - Buy Bot Service     |
| - Status Endpoint | <--------------------------------- | - Sell Bot Service    |
+-------------------+        (Ping-Ñ„Ð°Ð¹Ð»Ñ‹: timestamp)    | - buy_bot.ping        |
                                                         | - sell_bot.ping       |
                                                         +-----------------------+
### Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°

```
bot-monitoring-server/
â”œâ”€â”€ monitoring_server.py  # ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ
â”œâ”€â”€ .env.example          # ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ñ„Ð°Ð¹Ð»Ð° Ñ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ð¼Ð¸ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ
â”œâ”€â”€ requirements.txt      # Ð—Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ Python
â”œâ”€â”€ bot_monitor.log       # Ð¤Ð°Ð¹Ð» Ð»Ð¾Ð³Ð¾Ð² (ÑÐ¾Ð·Ð´Ð°ÐµÑ‚ÑÑ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸)
â””â”€â”€ README.md

#### ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð¸ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°
### 1. Ð—Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸
Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½ Python 3.8+. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ñ‹Ðµ Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ¸:
pip install -r requirements.txt

### 2. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ

Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ñ„Ð°Ð¹Ð» .env Ð² ÐºÐ¾Ñ€Ð½ÐµÐ²Ð¾Ð¹ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ð½Ð° Ð¾ÑÐ½Ð¾Ð²Ðµ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ð° .env.example:

# ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ Flask-ÑÐµÑ€Ð²ÐµÑ€Ð° Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ð°
MONITOR_SERVER_HOST=127.0.0.1
MONITOR_SERVER_PORT=5000

# ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ Ðº ÑƒÐ´Ð°Ð»ÐµÐ½Ð½Ð¾Ð¼Ñƒ ÑÐµÑ€Ð²ÐµÑ€Ñƒ Ñ Ð±Ð¾Ñ‚Ð°Ð¼Ð¸
REMOTE_HOST=your-remote-server.com
USERNAME_1=your-ssh-username
PASSWORD=your-ssh-password

# ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ñ systemd ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð² Ð²Ð°ÑˆÐ¸Ñ… Ð±Ð¾Ñ‚Ð¾Ð²
BUY_BOT_SERVICE=buy_bot
SELL_BOT_SERVICE=sell_bot

# ÐÐ±ÑÐ¾Ð»ÑŽÑ‚Ð½Ñ‹Ðµ Ð¿ÑƒÑ‚Ð¸ Ðº ping-Ñ„Ð°Ð¹Ð»Ð°Ð¼ Ð½Ð° ÑƒÐ´Ð°Ð»ÐµÐ½Ð½Ð¾Ð¼ ÑÐµÑ€Ð²ÐµÑ€Ðµ
BUY_BOT_PING_FILE=/path/to/your/buy_bot.ping
SELL_BOT_PING_FILE=/path/to/your/sell_bot.ping

# Ð¢Ð°Ð¹Ð¼Ð°ÑƒÑ‚Ñ‹ Ð¸ Ð¸Ð½Ñ‚ÐµÑ€Ð²Ð°Ð»Ñ‹ (Ð² ÑÐµÐºÑƒÐ½Ð´Ð°Ñ…)
PING_TIMEOUT=120    # Ð‘Ð¾Ñ‚ ÑÑ‡Ð¸Ñ‚Ð°ÐµÑ‚ÑÑ "ÑƒÐ¿Ð°Ð²ÑˆÐ¸Ð¼", ÐµÑÐ»Ð¸ Ð½Ðµ Ð¿Ð¸Ð½Ð³Ð¾Ð²Ð°Ð»ÑÑ Ð´Ð¾Ð»ÑŒÑˆÐµ ÑÑ‚Ð¾Ð³Ð¾ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸
CHECK_INTERVAL=1800 # ÐšÐ°Ðº Ñ‡Ð°ÑÑ‚Ð¾ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ Ð±Ð¾Ñ‚Ð¾Ð² (1800 ÑÐµÐº = 30 Ð¼Ð¸Ð½)

3. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð¢Ð¾Ñ€Ð³Ð¾Ð²Ñ‹Ñ… Ð‘Ð¾Ñ‚Ð¾Ð²
Ð’Ð°Ð¶Ð½Ð¾! Ð”Ð»Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ð° Ð²Ð°ÑˆÐ¸ Ð±Ð¾Ñ‚Ñ‹ Ð´Ð¾Ð»Ð¶Ð½Ñ‹ Ð±Ñ‹Ñ‚ÑŒ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ñ‹ ÐºÐ°Ðº systemd-ÑÐµÑ€Ð²Ð¸ÑÑ‹ Ð¸ Ð´Ð¾Ð»Ð¶Ð½Ñ‹ Ð¿Ð¾ÑÑ‚Ð¾ÑÐ½Ð½Ð¾ Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÑ‚ÑŒ ÑÐ²Ð¾Ð¸ ping-Ñ„Ð°Ð¹Ð»Ñ‹.

ÐŸÑ€Ð¸Ð¼ÐµÑ€ ÐºÐ¾Ð´Ð° Ð´Ð»Ñ Ð±Ð¾Ñ‚Ð° (Python):

python
import time
import os

PING_FILE = "/path/to/your/buy_bot.ping"

while True:
    # Ð’Ð°ÑˆÐ° Ð¾ÑÐ½Ð¾Ð²Ð½Ð°Ñ Ñ‚Ð¾Ñ€Ð³Ð¾Ð²Ð°Ñ Ð»Ð¾Ð³Ð¸ÐºÐ° Ð·Ð´ÐµÑÑŒ
    # ...

    # ÐŸÐµÑ€Ð¸Ð¾Ð´Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ping-Ñ„Ð°Ð¹Ð»Ð°
    with open(PING_FILE, 'w') as f:
        f.write(str(time.time()))
    
    time.sleep(30)  # ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ ÐºÐ°Ð¶Ð´Ñ‹Ðµ 30 ÑÐµÐºÑƒÐ½Ð´
ÐŸÑ€Ð¸Ð¼ÐµÑ€ systemd-ÑÐµÑ€Ð²Ð¸ÑÐ° (/etc/systemd/system/buy_bot.service):

ini
[Unit]
Description=Buy Bot Service
After=network.target

[Service]
Type=simple
User=ubuntu
WorkingDirectory=/path/to/your/bot
ExecStart=/usr/bin/python3 /path/to/your/bot/buy_bot.py
Restart=on-failure
RestartSec=10

[Install]
WantedBy=multi-user.target
ðŸš€ Ð—Ð°Ð¿ÑƒÑÐº
Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ ÑÐµÑ€Ð²ÐµÑ€ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ð°:

bash
python monitoring_server.py
Ð¡ÐµÑ€Ð²ÐµÑ€ Ð½Ð°Ñ‡Ð½ÐµÑ‚ Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ Ð² Ð´Ð²ÑƒÑ… Ñ€ÐµÐ¶Ð¸Ð¼Ð°Ñ…:

Ð¤Ð¾Ð½Ð¾Ð²Ð°Ñ Ð·Ð°Ð´Ð°Ñ‡Ð° Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ð°: ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ Ð±Ð¾Ñ‚Ð¾Ð² ÐºÐ°Ð¶Ð´Ñ‹Ðµ CHECK_INTERVAL ÑÐµÐºÑƒÐ½Ð´.

HTTP Ð¡ÐµÑ€Ð²ÐµÑ€: Ð”Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½ Ð¿Ð¾ Ð°Ð´Ñ€ÐµÑÑƒ http://MONITOR_SERVER_HOST:MONITOR_SERVER_PORT.

ðŸ“¡ API Endpoints
GET /
Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ð¿Ñ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²ÐµÐ½Ð½Ð¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ.

GET /status
Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ñ‚ÐµÐºÑƒÑ‰Ð¸Ð¹ ÑÑ‚Ð°Ñ‚ÑƒÑ Ð±Ð¾Ñ‚Ð¾Ð² Ð² Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ðµ JSON.

ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð¾Ñ‚Ð²ÐµÑ‚Ð°:

json
{
  "buy_bot": "Running",
  "sell_bot": "Not Running"
}
Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ñ‹Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ ÑÑ‚Ð°Ñ‚ÑƒÑÐ°:

"Running" - Ð‘Ð¾Ñ‚ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð½Ð¾Ñ€Ð¼Ð°Ð»ÑŒÐ½Ð¾.

"Not Running" - Ð‘Ð¾Ñ‚ Ð½Ðµ Ð¾Ñ‚Ð²ÐµÑ‡Ð°ÐµÑ‚, Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½ Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐº.

"File Not Found" - Ping-Ñ„Ð°Ð¹Ð» Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½, Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½ Ð·Ð°Ð¿ÑƒÑÐº ÑÐµÑ€Ð²Ð¸ÑÐ°.

"Error: ..." - ÐŸÑ€Ð¾Ð¸Ð·Ð¾ÑˆÐ»Ð° Ð¾ÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐµ.

"Unknown" - Ð¡Ñ‚Ð°Ñ‚ÑƒÑ ÐµÑ‰Ðµ Ð½Ðµ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½ (Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½Ð¾Ðµ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ).

ðŸ“Š Ð›Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ
Ð’ÑÐµ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ Ð»Ð¾Ð³Ð¸Ñ€ÑƒÑŽÑ‚ÑÑ Ð² Ñ„Ð°Ð¹Ð» bot_monitor.log Ñ ÑƒÐºÐ°Ð·Ð°Ð½Ð¸ÐµÐ¼ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸, ÑƒÑ€Ð¾Ð²Ð½Ñ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð¸ Ð´ÐµÑ‚Ð°Ð»ÐµÐ¹.

ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð»Ð¾Ð³Ð°:

text
2023-10-05 12:34:56,789 - INFO - Ð£ÑÐ¿ÐµÑˆÐ½Ð¾Ðµ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ðº ÑÐµÑ€Ð²ÐµÑ€Ñƒ.
2023-10-05 12:34:57,123 - INFO - ÐÐ°Ñ‡Ð°Ð»Ð¾ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ Ð±Ð¾Ñ‚Ð¾Ð²...
2023-10-05 12:34:57,456 - INFO - buy_bot Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð½Ð¾Ñ€Ð¼Ð°Ð»ÑŒÐ½Ð¾.
2023-10-05 12:34:57,789 - WARNING - sell_bot Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚. ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐº...
2023-10-05 12:34:58,123 - INFO - sell_bot ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑ‰ÐµÐ½.
ðŸ”§ Ð ÐµÑˆÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼
"Error: Authentication failed" Ð² Ð»Ð¾Ð³Ð°Ñ…:

ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ USERNAME_1 Ð¸ PASSWORD Ð² Ñ„Ð°Ð¹Ð»Ðµ .env.

Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ Ð½Ð° ÑƒÐ´Ð°Ð»ÐµÐ½Ð½Ð¾Ð¼ ÑÐµÑ€Ð²ÐµÑ€Ðµ Ñ€Ð°Ð·Ñ€ÐµÑˆÐµÐ½Ñ‹ SSH-Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ Ð¿Ð¾ Ð¿Ð°Ñ€Ð¾Ð»ÑŽ.

Ð¡Ñ‚Ð°Ñ‚ÑƒÑ Ð±Ð¾Ñ‚Ð° Ð¿Ð¾ÑÑ‚Ð¾ÑÐ½Ð½Ð¾ "File Not Found":

ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ Ð¿ÑƒÑ‚ÐµÐ¹ BUY_BOT_PING_FILE Ð¸ SELL_BOT_PING_FILE.

Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ Ð±Ð¾Ñ‚ Ð¸Ð¼ÐµÐµÑ‚ Ð¿Ñ€Ð°Ð²Ð° Ð½Ð° Ð·Ð°Ð¿Ð¸ÑÑŒ Ð² ÑƒÐºÐ°Ð·Ð°Ð½Ð½ÑƒÑŽ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ Ð¸ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ ÑÐ¾Ð·Ð´Ð°ÐµÑ‚/Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÐµÑ‚ Ñ„Ð°Ð¹Ð».

Ð¡Ñ‚Ð°Ñ‚ÑƒÑ Ð±Ð¾Ñ‚Ð° "Not Running", Ñ…Ð¾Ñ‚Ñ Ð¾Ð½ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚:

Ð£Ð²ÐµÐ»Ð¸Ñ‡ÑŒÑ‚Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ PING_TIMEOUT, ÐµÑÐ»Ð¸ Ð±Ð¾Ñ‚ Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÐµÑ‚ ping-Ñ„Ð°Ð¹Ð» Ñ€ÐµÐ¶Ðµ, Ñ‡ÐµÐ¼ Ñ€Ð°Ð· Ð² PING_TIMEOUT ÑÐµÐºÑƒÐ½Ð´.

ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ, Ð½Ðµ "Ð·Ð°Ð²Ð¸ÑÐ°ÐµÑ‚" Ð»Ð¸ Ð±Ð¾Ñ‚ Ð¸ Ð½Ðµ Ð¿Ñ€Ð¾Ð¿ÑƒÑÐºÐ°ÐµÑ‚ Ð»Ð¸ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ping-Ñ„Ð°Ð¹Ð»Ð°.

Flask-ÑÐµÑ€Ð²ÐµÑ€ Ð½Ðµ Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ÑÑ:

ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ, Ð½Ðµ Ð·Ð°Ð½ÑÑ‚ Ð»Ð¸ Ð¿Ð¾Ñ€Ñ‚ MONITOR_SERVER_PORT Ð´Ñ€ÑƒÐ³Ð¸Ð¼ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐ¾Ð¼.

ðŸ›¡ï¸ Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ
ÐÐ¸ÐºÐ¾Ð³Ð´Ð° Ð½Ðµ ÐºÐ¾Ð¼Ð¼Ð¸Ñ‚ÑŒÑ‚Ðµ Ñ„Ð°Ð¹Ð» .env Ð² Git! ÐžÐ½ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ Ð¿Ð°Ñ€Ð¾Ð»Ð¸ Ð¸ Ñ‡ÑƒÐ²ÑÑ‚Ð²Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ.

Ð”Ð»Ñ Ð¿Ñ€Ð¾Ð´Ð°ÐºÑˆÐ½-ÑÑ€ÐµÐ´Ñ‹ Ñ€Ð°ÑÑÐ¼Ð¾Ñ‚Ñ€Ð¸Ñ‚Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ SSH-ÐºÐ»ÑŽÑ‡ÐµÐ¹ Ð²Ð¼ÐµÑÑ‚Ð¾ Ð¿Ð°Ñ€Ð¾Ð»ÐµÐ¹.

ÐžÐ³Ñ€Ð°Ð½Ð¸Ñ‡ÑŒÑ‚Ðµ Ð´Ð¾ÑÑ‚ÑƒÐ¿ Ðº Flask-ÑÐµÑ€Ð²ÐµÑ€Ñƒ (MONITOR_SERVER_HOST=127.0.0.1) Ð¸Ð»Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ Ð±Ñ€Ð°Ð½Ð´Ð¼Ð°ÑƒÑÑ€.

ðŸš€ ÐŸÑ€Ð¾Ð´Ð²Ð¸Ð½ÑƒÑ‚Ð°Ñ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° (ÐŸÑ€Ð¾Ð´Ð°ÐºÑˆÐ½)
Ð—Ð°Ð¿ÑƒÑÐº ÐºÐ°Ðº systemd-ÑÐµÑ€Ð²Ð¸Ñ: Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ ÑÐµÑ€Ð²Ð¸Ñ Ð´Ð»Ñ ÑÐ°Ð¼Ð¾Ð³Ð¾ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ð¾Ð²Ð¾Ð³Ð¾ ÑÐµÑ€Ð²ÐµÑ€Ð°, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¾Ð½ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð·Ð°Ð¿ÑƒÑÐºÐ°Ð»ÑÑ Ð¿Ñ€Ð¸ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐµ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹ Ð¸ Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐºÐ°Ð»ÑÑ Ð¿Ñ€Ð¸ ÑÐ±Ð¾ÑÑ….

Docker: ÐžÐ±ÐµÑ€Ð½Ð¸Ñ‚Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð² Docker-ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€ Ð´Ð»Ñ Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ñ‚Ñ‹ Ñ€Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ñ Ð¸ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ.

Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ: Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÑƒ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ð¹ Ð² Telegram/Slack Ð¿Ñ€Ð¸ Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐºÐµ Ð±Ð¾Ñ‚Ð°.